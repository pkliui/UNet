<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.04.07"/>
        <title>Dataset creation - unet-segmentation 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=68f4518137b9aefe99b631505a2064c3c42c9852" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">unet-segmentation 1.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">unet-segmentation 1.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="dataset.html">Dataset creation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="dataset-creation">
<h1>Dataset creation<a class="headerlink" href="#dataset-creation" title="Permalink to this headline">#</a></h1>
<p>This document describes the dataset format used by SkinSeg framework for segmentation of dermatoscopic images. After creating the dataset one can keep it locally or upload to AzureML blob storage.</p>
<section id="ph2-dataset">
<h2>PH2 Dataset<a class="headerlink" href="#ph2-dataset" title="Permalink to this headline">#</a></h2>
<p>As an example for training, the framework uses the <a class="reference external" href="https://www.fc.up.pt/addi/ph2%20database.html">PH2 dermoscopic image database</a> acquired at the Dermatology Service of Hospital Pedro Hispano, Matosinhos, Portugal. They are 8-bit RGB color images with a resolution of 768x560 pixels of lesions (we refer to them as <em>images</em>) and their segmentations available as binary masks (we refer to them as <em>masks</em>). In total the database comprises 200 datasets and corresponding files with metadata:</p>
<ul class="simple">
<li><p><em>PH2 Dataset images</em> folder contains the image data.</p></li>
<li><p><em>PH2 Dataset.xlsx</em> file contains the classification of all images according to the dermoscopic criteria that are evaluated in the PH2 database.</p></li>
<li><p><em>PH2 Dataset.txt</em> file contains the classification of all images ccording to the dermoscopic criteria that are evaluated in the PH2 database.</p></li>
</ul>
<p>For more details please refer to the original website. The PH2 dataset sets requirements for the file structure currently supported by the framework. It is possible to use any other dataset if it fulfills the following requirements:</p>
<ul class="simple">
<li><p>Images are saved in png or bmp formats. For each image there is a corresponding mask.</p></li>
<li><p>Following the architecture of UNet used for segmentation, the sampling of images must be no less than 572x572 pixels and the sampling of masks no less than 388x388 pixels. The data are then automatically pre-processed in terms of their size accordingly prior to their use by framework.</p></li>
<li><p>Each set of data has a unique identifier <em>Image Name</em> and resides in a separate folder with this particular ID name.</p></li>
</ul>
<p>Currently, the file structure for segmentation using the PH2 database looks like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">PH2Dataset</span>
<span class="go">├── PH_Dataset_images</span>
<span class="go">│    ├── IMD002</span>
<span class="go">│    │    ├── IMD002_Dermoscopic_Image</span>
<span class="go">│    │    │    └── IMD002.bmp</span>
<span class="go">│    │    └── IMD002_lesion</span>
<span class="go">│    │         └── IMD002_lesion.bmp</span>
<span class="go">│    ├── IMD003</span>
<span class="go">│    │    ├── IMD003_Dermoscopic_Image</span>
<span class="go">│    │    │    └── IMD003.bmp</span>
<span class="go">│    │    └── IMD003_lesion</span>
<span class="go">│    │         └── IMD003_lesion.bmp</span>
<span class="go">│    ├──...</span>
<span class="go">├── PH2_dataset.txt</span>
<span class="go">└── PH2_dataset.xlsx</span>
</pre></div>
</div>
</section>
<section id="making-a-pytorch-dataset">
<h2>Making a pytorch dataset<a class="headerlink" href="#making-a-pytorch-dataset" title="Permalink to this headline">#</a></h2>
<section id="unetdataset">
<h3>UNetDataset<a class="headerlink" href="#unetdataset" title="Permalink to this headline">#</a></h3>
</section>
<section id="example-ph2-dataset">
<h3>Example: PH2 dataset<a class="headerlink" href="#example-ph2-dataset" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Create a new dataset using PH2 data from the <code class="docutils literal notranslate"><span class="pre">`PH2Dataset`</span></code> class as follows:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DATAPATH</span> <span class="o">=</span> <span class="s1">'/path/to/PH_Dataset_images/'</span>
<span class="n">SIZE_IMAGES</span> <span class="o">=</span> <span class="p">(</span><span class="mi">572</span><span class="p">,</span><span class="mi">572</span><span class="p">)</span> <span class="c1"># follows the unet guidelines</span>
<span class="n">SIZE_MASKS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">388</span><span class="p">,</span> <span class="mi">388</span><span class="p">)</span>
<span class="n">ph2_dataset</span> <span class="o">=</span> <span class="n">PH2Dataset</span><span class="p">(</span>
    <span class="n">root_dir</span><span class="o">=</span><span class="n">DATAPATH</span><span class="p">,</span>
    <span class="n">transform</span><span class="o">=</span><span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">Resize</span><span class="p">(</span><span class="n">SIZE_IMAGES</span><span class="p">,</span> <span class="n">SIZE_MASKS</span><span class="p">)))</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">`PH2Dataset`</span></code> class inherits from the UNetDataset class. The <code class="docutils literal notranslate"><span class="pre">`UNetDataset`</span></code> class is specific to the UNet segmentation for the file structure as above. It returns a dictionary</p></li>
<li></li>
</ul>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, pkliui
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Dataset creation</a><ul>
<li><a class="reference internal" href="#ph2-dataset">PH2 Dataset</a></li>
<li><a class="reference internal" href="#making-a-pytorch-dataset">Making a pytorch dataset</a><ul>
<li><a class="reference internal" href="#unetdataset">UNetDataset</a></li>
<li><a class="reference internal" href="#example-ph2-dataset">Example: PH2 dataset</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>